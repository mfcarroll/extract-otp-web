<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OTP Secret Extractor</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/src/style.css">
</head>
<body>
  <div id="app">
    <h1>Google Authenticator OTP Secret Extractor</h1>

    <div class="accordion active">
      <button class="accordion-button">What is this?</button>
      <div class="accordion-content">
        <p>This tool extracts One-Time Password secrets from the Google Authenticator app. It runs <strong>entirely locally, here in your browser</strong>. No data is ever sent to any server, and there is no software to install.</p>
      </div>
    </div>

    <div class="accordion">
      <button class="accordion-button">
        Why is this needed?
      </button>
      <div class="accordion-content">
        <p>Google Authenticator provides a way to transfer your One-Time Passwords from one copy of Google Authenticator, to another copy on a different device, but it does <em>not</em> provide any way to view the original secrets, i.e. the QR code (or string of hexdecimal characters) that was initially used to add the OTP into Google Authenticator in the first place. This makes it challenging to migrate from Google Authenticator to other apps that can store One-Time Passwords, such as 1Password. Without the original secrets you have to log into each account one by one to either get the setup QR code again, or reconfigure the OTP completely, which is time-consuming and a huge pain. This tool provides a simple browser-based solution to that problem.</p>
      </div>
    </div>

    <div class="accordion">
      <button class="accordion-button">
        How does it work?
      </button>
      <div class="accordion-content">
        <p>You provide a screenshot of the export QR code(s) from the Google Authenticator app, which typically contain multiple OTP secrets within each QR code. This tool extracts the original secrets and provides them to you in a standard format (hex code / QR code) that you can then scan or input into your OTP app of choice.</p>
      </div>
    </div>

    <div class="accordion">
      <button class="accordion-button">How to get the QR code from Google Authenticator</button>

      <div class="accordion-content">
        <ol>
          <li>In Google Authenticator, click the hamburger menu at the top left.</li>
          <li>Choose “Transfer Accounts”.</li>
          <li>Click “Export Accounts”.</li>
          <li>Select the accounts to export (by default, all accounts are included). Click “Next”.</li>
          <li>You’ll be shown one or more QR codes, depending on how many One-Time Passwords you have. Take a screenshot of each QR code.</li>
          <li>Add each screenshot here to extract your OTP secrets.</li>
        </ol>
      </div>
    </div>


    <div class="file-input-wrapper">
      <label for="qr-input" class="file-input-label" aria-label="Select QR Code Image">Select QR Code Image</label>
      <input type="file" id="qr-input" accept="image/*">
    </div>

    <canvas id="qr-canvas" style="display: none;"></canvas>
    <div id="results-container"></div>

    <div id="export-container">
      <button id="download-csv-button"><i class="fa fa-download"></i> Download as CSV</button>
    </div>
  </div>
  <script type="module" src="/src/main.ts"></script>
</body>
</html>
